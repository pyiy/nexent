# 记忆管理

Nexent的智能记忆系统为智能体提供持久化的上下文感知能力，通过多层级记忆管理机制，实现跨对话会话的知识累积与检索，显著提升人机交互的连贯性和个性化程度。

## 🎯 什么是智能记忆系统

智能记忆系统让智能体能够"记住"重要信息，并在后续对话中自动使用这些记忆，为您提供更连贯、更个性化的服务体验。

### 核心优势

- **跨对话记忆**：智能体可以记住之前对话中的重要信息
- **自动检索**：智能体会自动检索相关记忆，无需您重复说明
- **个性化服务**：根据您的偏好和习惯提供个性化服务
- **知识积累**：智能体的知识会随着使用不断积累和优化

## ⚙️ 系统配置

### 访问记忆管理

1. 在左侧导航栏中点击"记忆管理"
2. 进入记忆管理页面进行配置

### 基础配置

在记忆管理页面的"系统配置"模块中，您可以进行以下设置：

| 配置项 | 选项 | 默认值 | 说明 |
|--------|------|--------|------|
| 记忆服务状态 | 启用/禁用 | 启用 | 控制整个记忆系统的运行状态 |
| Agent 记忆共享策略 | 总是共享/每次询问我/禁止共享 | 总是共享 | 定义Agent间共享记忆生成是否需要用户授权同意 |

<div style="display: flex; justify-content: left;">
  <img src="./assets/memory/mem-config.png" style="width: 80%; height: auto;" alt="记忆系统配置" />
</div>

### 配置说明

- **记忆服务状态**：启用后，智能体将能够使用记忆功能；禁用后，所有记忆功能将暂停。
- **Agent 记忆共享策略**：
  - **总是共享**：智能体之间自动共享记忆，无需确认
  - **每次询问我**：智能体间共享记忆前会询问您的意见
  - **禁止共享**：智能体之间不共享记忆，保持独立

## 📚 记忆层级

Nexent采用四层记忆存储架构，不同层级的记忆有不同的作用域和用途：

### 租户级记忆

- **作用域**：组织全局，所有用户和智能体共享
- **存储内容**：企业级标准操作流程、合规政策、组织架构、事实信息
- **适用场景**：企业知识管理、标准化流程执行、合规性检查
- **管理权限**：租户管理员

### 智能体级记忆

- **作用域**：特定智能体，该智能体的所有用户共享
- **存储内容**：专业领域知识、技能模板、历史对话摘要、学习积累
- **适用场景**：专业技能积累、领域知识沉淀、经验学习
- **管理权限**：租户管理员

### 用户级记忆

- **作用域**：特定用户账户，仅该用户可见
- **存储内容**：个人偏好设置、使用习惯、常用指令模板、个人信息
- **适用场景**：个性化服务、用户体验优化、偏好管理
- **管理权限**：用户自己

### 用户-智能体级记忆

- **作用域**：特定用户账户下的特定智能体，最私密和个性化
- **存储内容**：协作历史、个性化事实信息、特定任务上下文、关系模型
- **适用场景**：深度协作场景、个性化调优、任务连续性维护
- **管理权限**：用户自己

### 记忆优先级

当智能体需要检索记忆时，会按照以下优先级顺序（由高到低）：

1. **租户级** → 基础事实和通用知识
2. **用户-智能体级** → 最具体的上下文信息
3. **用户级** → 个人偏好和习惯
4. **智能体级** → 专业知识和技能

## 🤖 自动化记忆管理

智能记忆系统支持自动化管理，让您无需手动操作即可享受记忆功能：

### 智能提取

- 系统会自动识别对话中的关键事实信息
- 自动生成记忆条目并存储到合适的层级
- 无需您手动添加，系统会智能判断重要性

### 自动上下文嵌入

- 智能体会自动检索相关性最高的记忆条目
- 将记忆隐式嵌入到对话上下文中
- 让智能体能够基于历史记忆提供更准确的回答

### 增量更新

- 支持记忆内容的渐进式更新和补充
- 自动清理过时或不再相关的记忆条目
- 保持记忆库的时效性和准确性

## ✋ 手动记忆操作

除了自动化管理，您也可以手动管理记忆，确保重要信息被正确记录：

### 添加记忆

1. 在记忆管理页面，选择要添加记忆的层级和智能体
2. 点击绿色的"对话加号"按钮
3. 输入要记录的内容（最多500字符）
4. 点击对钩确认添加

<div style="display: flex; justify-content: left;">
  <img src="./assets/memory/add-mem.png" style="width: 80%; height: auto;" alt="添加记忆" />
</div>

### 删除记忆

您可以通过以下方式删除记忆：

- **删除分组记忆**：点击红色叉号按钮，在确认弹框中点击确认，可删除某个智能体分组下所有的记忆条目
- **删除单条记忆**：点击红色橡皮按钮，可删除特定的一条记忆条目

<div style="display: flex; justify-content: left;">
  <img src="./assets/memory/delete-mem.png" style="width: 80%; height: auto;" alt="删除记忆" />
</div>

## 💡 使用建议

### 记忆内容原则

1. **原子性原则**：每条记忆应包含**简洁**、**单一**、**明确**的事实信息
   - ✅ 好：用户喜欢使用深色主题
   - ❌ 不好：用户喜欢使用深色主题，并且经常在晚上工作，还喜欢喝咖啡

2. **时效性管理**：定期清理过时或不再相关的记忆条目，保持记忆库的时效性和准确性

3. **隐私保护**：敏感信息应尽量避免在租户层级或智能体层级进行共享，建议使用用户级或用户-智能体级记忆

### 最佳实践

- **合理选择层级**：根据信息的共享需求选择合适的记忆层级
- **定期检查**：定期查看和清理记忆，确保信息的准确性
- **利用自动化**：让系统自动管理常规记忆，手动管理重要信息
- **保护隐私**：个人敏感信息使用用户级记忆，避免共享

## 🚀 下一步

配置好记忆管理后，您可以：

1. 在 **[开始问答](./start-chat)** 中体验智能体的记忆能力
2. 在 **[智能体空间](./agent-space)** 中管理您的智能体
3. 继续 **[智能体开发](./agent-development)** 创建更多智能体

如果您在配置过程中遇到任何问题，请参考我们的 **[常见问题](../getting-started/faq)** 或在[GitHub Discussions](https://github.com/ModelEngine-Group/nexent/discussions)中进行提问获取支持。
